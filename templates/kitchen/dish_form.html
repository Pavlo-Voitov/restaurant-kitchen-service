{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block content %}
  <h1>{% if object %}Update dish{% else %}Create dish{% endif %}</h1>
  <form action="" method="post">
    {% csrf_token %}
    {{ form|crispy }}
    <hr>
    <h5>Ingredients</h5>

    {{ formset.management_form }}

    {% for f in formset %}
      <div class="border rounded p-3 mb-2">
        {{ f|crispy }}
      </div>
    {% endfor %}

    <input type="submit" value="{% if object %}Save{% else %}Create{% endif %}" class="btn btn-primary">
    {% if object %}
       <a class="btn btn-secondary"
        href="{% url 'kitchen:dish-detail' pk=object.pk %}">
        Cancel
       </a>
    {% else %}
      <a class="btn btn-secondary" href="{% url 'kitchen:dish-list' %}">
     Cancel
      </a>
{% endif %}
  </form>

{% endblock %}