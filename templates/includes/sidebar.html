{% load query_string %}

<h2 class="sidebar-section-title">
  Types of dish
</h2>

<form method="get" class="mb-2 sidebar-search">
  {% for key, value in request.GET.items %}
  {% if key != "type_query" and key != "page" %}
  <input type="hidden" name="{{ key }}" value="{{ value }}">
  {% endif %}
  {% endfor %}

  <input
      type="text"
      name="type_q"
      class="form-control form-control-sm"
      placeholder="Search type..."
      value="{{ type_query }}"
  >
</form>

<div class="sidebar-nav list-group sidebar-scroll">

  <a href="{% url 'kitchen:dish-list' %}"
     class="list-group-item list-group-item-action badge
       {% if not selected_dish_type %}active{% endif %}">
    All Types of Dish
  </a>

  {% for dish_type in sidebar_types %}
  <a href="{% url 'kitchen:dish-list' %}?{% query_string request dish_type=dish_type.id %}"
     class="list-group-item list-group-item-action badge
       {% if dish_type.id == selected_dish_type %}active{% endif %}">
    <span class="sidebar-item-text">{{ dish_type.name }}</span>
    <span class="badge badge-pill badge-light ml-auto">({{ dish_type.dish_count }})</span>
  </a>
  {% endfor %}

</div>

<br>

<h2 class="sidebar-section-title">
  Cooks
</h2>

<form method="get" class="mb-2 sidebar-search">
  {% for key, value in request.GET.items %}
  {% if key != "cook_query" and key != "page" %}
  <input type="hidden" name="{{ key }}" value="{{ value }}">
  {% endif %}
  {% endfor %}

  <input
      type="text"
      name="cook_q"
      class="form-control form-control-sm"
      placeholder="Search cook..."
      value="{{ cook_query }}"
  >
</form>

<div class="sidebar-nav list-group sidebar-scroll">

  <a href="{% url 'kitchen:dish-list' %}"
     class="list-group-item list-group-item-action badge
       {% if not selected_cook %}active{% endif %}">
    All Cooks
  </a>

  {% for cook in sidebar_cooks %}
  <a href="{% url 'kitchen:dish-list' %}?{% query_string request cook=cook.id %}"
     class="list-group-item list-group-item-action text-middle badge
       {% if cook.id == selected_cook %}active{% endif %}">
    {{ cook.username }}
  </a>

  {% endfor %}

</div>
